<VirtualHost *:80>
    ServerName your-domain.com
    # Replace with your actual domain or use _default_ for all domains

    # Proxy configuration for t1dtools-wrapped
    ProxyPreserveHost On
    ProxyRequests Off

    # Enable SSL if needed (uncomment and configure)
    # SSLEngine on
    # SSLCertificateFile /path/to/certificate.crt
    # SSLCertificateKeyFile /path/to/private.key

    # Proxy all requests from /t1dtools-wrapped to the Docker container
    ProxyPass /t1dtools-wrapped http://localhost:3333/wrapped
    ProxyPassReverse /t1dtools-wrapped http://localhost:3333/wrapped

    # Handle WebSocket connections if needed
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/t1dtools-wrapped/(.*) ws://localhost:3333/wrapped/$1 [P,L]

    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"

    # Logging (optional)
    ErrorLog ${APACHE_LOG_DIR}/t1dtools-wrapped_error.log
    CustomLog ${APACHE_LOG_DIR}/t1dtools-wrapped_access.log combined
</VirtualHost>

