# Simple Apache proxy configuration snippet
# Add this to your Apache virtual host configuration or httpd.conf

# Enable required modules (run these commands if not already enabled):
# sudo a2enmod proxy
# sudo a2enmod proxy_http
# sudo a2enmod headers
# sudo a2enmod rewrite
# sudo systemctl restart apache2

# Note: Do NOT add trailing slashes to avoid double-slash issues
<Location /t1dtools-wrapped>
    ProxyPass http://localhost:3333/t1dtools-wrapped
    ProxyPassReverse http://localhost:3333/t1dtools-wrapped
    
    # Preserve the original host header
    ProxyPreserveHost On
    
    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
</Location>

# Handle trailing slash version as well
<Location /t1dtools-wrapped/>
    ProxyPass http://localhost:3333/t1dtools-wrapped/
    ProxyPassReverse http://localhost:3333/t1dtools-wrapped/
    ProxyPreserveHost On
</Location>

# Optional: Redirect root to /t1dtools-wrapped
# <Location />
#     RedirectMatch ^/$ /t1dtools-wrapped
# </Location>

